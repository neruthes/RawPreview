<!DOCTYPE html>
<html>
<!-- 105 -->
<head>
	<meta charset="utf-8" />
	<title>RawPreview</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="/neruthes.ico">
	<link rel="apple-touch-icon" href="/neruthes.png">
	<style type="text/css">
	* {
		text-rendering: optimizeLegibility;
	}
	body {
		font-family: -apple-system, 'SF Pro Text', 'Helvetica Neue', 'Helvetica', 'Open Sans', 'Ubuntu', 'Arial', sans-serif, 'PingFang SC', '.PingFang SC', 'Noto Sans CJK SC', 'Source Han Sans CN', 'Hiragino Sans GB', 'YuGothic', 'Heiti SC';
		font-weight: 200;
		font-size: 18px;
		color: #000;
		line-height: 32px;
		background: #FFF;
		min-height: 100vh;
		padding: 0;
		margin: 0;
	}
	#cont {
		box-sizing: border-box;
		margin: 0 auto;
		overflow: auto;
	}
	@media screen and (max-width: 768px) {
		#cont {
			padding: 20px 10px 20px;
		}
	}
	@media screen and (min-width: 769px) {
		#cont {
			max-width: 800px;
			padding: 40px 60px;
		}
	}
	#filepath {
		font-family: 'Menlo', monospace;
		font-size: 14px;
		font-weight: 400;
		color: #777;
		margin: 0 0 15px;
	}
	#filepath a {
		color: inherit;
		text-decoration: none;
	}
	#text {
		font-weight: 300;
		font-size: 18px;
		color: #000;
		line-height: 32px;
		background: none;
		width: 100%;
		padding: 0 0 100px;
		margin: 0;
		box-sizing: border-box;
		border: none;
		outline: none;
		overflow: auto;
		resize: none;
	}
	#text * {
		margin: 1em 0;
	}
	#text hr {
		background: #000;
		border: none;
		width: 62% auto;
		margin: 48px 0;
	}
	footer {
		font-size: 16px;
		color: #AAA;
	}
	footer a {
		color: inherit;
	}
	</style>
	<script type="text/javascript">
	</script>
</head>
<body>
	<div id="cont">
		<div id="filepath">
		</div>
		<div id="text">
		</div>
		<footer>
			<div class="">
				&copy; <span id="author-profile"></span> document content.
			</div>
			<div class="">
				&copy; <a href="https://neruthes.xyz/">Neruthes</a> 2019<script>document.write((function (d) { return d.getFullYear() == '2019' ? '' : '-' + d.getFullYear()})(new Date()))</script> RawPreview service software.
			</div>
			<div class="">
				<a href="https://github.com/neruthes/RawPreview">Source code</a> is published under <a target="_blank" href="https://www.gnu.org/licenses/agpl-3.0.html">GNU AGPL v3</a>.
			</div>
		</footer>
		<script type="text/javascript">
		var markdownRender = function (text) {
			return text.split('\n\n').map(function (line) {
				if (line.indexOf('# ') === 0) {
					return `<h1>${line.replace('# ', '')}</h1>`;
				} else if (line.indexOf('## ') === 0) {
					return `<h2>${line.replace('## ', '')}</h2>`;
				} else if (line.indexOf('### ') === 0) {
					return `<h3>${line.replace('### ', '')}</h3>`;
				} else if (line.indexOf('#### ') === 0) {
					return `<h4>${line.replace('#### ', '')}</h4>`;
				} else if (line.indexOf('> ') === 0) {
					return `<blockquote><p>${line.replace('> ', '')}</p></blockquote>`;
				} else if (line.indexOf('***') === 0) {
					return '<hr />';
				} else {
					return `<p>${line}</p>`;
				};
			}).join('');
		};
		</script>
		<script type="text/javascript">
		var versionedfilePath = location.pathname.replace(/^.+?fbd30a70\//, '');
		var filePath = versionedfilePath.replace(/@[0-9a-f]+\//, '/')
		var blobMasterPath = filePath.replace('/', '{X}').replace('/', '/blob/master/').replace('{X}', '/');
		var githubUsername = filePath.match(/^([^\/]+?)\//)[1];
		var fileName = blobMasterPath.replace(/^.+?\/blob\/master\//, '');
		document.title = fileName + ' - RawPreview';
		document.querySelector('#filepath').innerHTML = `This webpage is the online preview of:<br /><a id="anchor-filepath" target="_blank" href="https://github.com/${blobMasterPath}">${filePath}</a>`;
		document.querySelector('#author-profile').innerHTML = `<a href="https://github.com/${githubUsername}">User @${githubUsername} on GitHub</a>`;
		(function () {
            window.xhr = new XMLHttpRequest();
            xhr.open('get', `https://cdn.jsdelivr.net/gh/${versionedfilePath}`);
            xhr.onload = function (e) {
				console.log(e);
				// Write content
                document.querySelector('#text').innerHTML = markdownRender(e.target.responseText);

				// Update title
				if (document.querySelectorAll('h1').length !== 0) {
					// If any specified title in document
					document.title = document.querySelectorAll('h1')[0].innerText + ' - RawPreview';
				}
            };
            xhr.send();
        })();
		</script>
	</div>
</body>
</html>
